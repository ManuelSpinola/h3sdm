% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/h3sdm_fit_model.R
\name{h3sdm_fit_model}
\alias{h3sdm_fit_model}
\title{Fits an SDM workflow to data using resampling and prepares it for stacking.}
\usage{
h3sdm_fit_model(
  workflow,
  data_split,
  presence_data = NULL,
  truth_col = "presence",
  pred_col = ".pred_1",
  for_stacking = FALSE,
  ...
)
}
\arguments{
\item{workflow}{A 'workflow' object from tidymodels (e.g., GAM or Random Forest).}

\item{data_split}{An 'rsplit' or 'rset' object (e.g., result of vfold_cv or spatial_block_cv).}

\item{presence_data}{(Optional) Original presence data (used for extended metrics).}

\item{truth_col}{Column name of the response variable (defaults to "presence").}

\item{pred_col}{Column name for the prediction of the class of interest (defaults to ".pred_1").}

\item{for_stacking}{Logical. If \code{TRUE}, uses \code{control_stack_resamples()}
to save all workflow information required for the 'stacks' package.
If \code{FALSE}, uses the standard control with \code{save_pred = TRUE}.}

\item{...}{Arguments passed on to other functions (e.g., to \code{tune::fit_resamples} if needed).}
}
\value{
A list with three elements:
\itemize{
\item \code{cv_model}: The result of \code{fit_resamples()}.
\item \code{final_model}: The model fitted to the entire training set (first split).
\item \code{metrics}: Extended evaluation metrics (if \code{presence_data} is provided).
}
}
\description{
Fits a Species Distribution Model (SDM) workflow to resampling data (cross-validation).
This function is the main training step and optionally configures the results
to be used with the 'stacks' package.
}
