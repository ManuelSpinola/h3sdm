[{"path":"https://manuelspinola.github.io/h3sdm/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Manuel Spinola Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"h3sdm workflow for a single model","text":"tutorial demonstrates complete workflow species distribution modeling (SDM) single species using h3sdm related packages. cover data preparation, model fitting, spatial cross-validation, prediction, feature importance analysis. Note: h3sdm package depends paisaje package data access processing functions. paisaje available CRAN, must installed GitHub using:","code":"install.packages(\"remotes\") remotes::install_github(\"ManuelSpinola/paisaje\") # Load the required packages library(h3sdm) library(paisaje) library(tidyverse) library(here) library(tidymodels) library(spatialsample) library(sf) library(terra) library(tidyterra) library(DALEX) library(DALEXtra) library(ingredients) library(exactextractr) library(workflowsets) library(themis) library(ggbrick)  # Optional packages for advanced modeling or visualization: if (requireNamespace(\"ranger\", quietly = TRUE)) library(ranger) if (requireNamespace(\"xgboost\", quietly = TRUE)) library(xgboost)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"define-the-area-of-interest","dir":"Articles","previous_headings":"","what":"1. Define the Area of Interest","title":"h3sdm workflow for a single model","text":"start defining geographical area modeling. use Costa Rica example. file includesd ‘h3sdm’ package.","code":"cr <- cr_outline_c"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"load-environmental-predictors","dir":"Articles","previous_headings":"","what":"2. Load Environmental Predictors","title":"h3sdm workflow for a single model","text":"use WorldClim historic bioclimatic variables Costa Rica environmental predictors. data included ‘h3sdm’ package.","code":"bio <- terra::rast(system.file(\"extdata\", \"bioclim_current.tif\", package = \"h3sdm\"))"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"load-species-occurrence-data","dir":"Articles","previous_headings":"","what":"3. Load Species Occurrence Data","title":"h3sdm workflow for a single model","text":"obtain presence–absence data species interest (Silverstoneia flotator). use h3sdm_pa function generate presence pseudo-absence records. limit 10,000 records set ensure presence records retrieved, 300 pseudo-absences generated. different methods generating pseudo-absences; , rely random sampling. Since approximately 100 positive hexagons resolution 7, request three times number (.e., 300) pseudo-absences. resolution, H3 hexagons 5.16 ha size. parameters can adjusted depending specific needs characteristics species modeled.","code":"records <- h3sdm_pa(\"Silverstoneia flotator\", cr, res = 7, limit = 10000, n_neg = 300) head(records) #> Simple feature collection with 6 features and 2 fields #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: -84.06344 ymin: 8.486587 xmax: -82.77295 ymax: 9.643344 #> Geodetic CRS:  WGS 84 #>        h3_address presence                       geometry #> 1 8766b4415ffffff        1 MULTIPOLYGON (((-84.05549 9... #> 2 87679b636ffffff        1 MULTIPOLYGON (((-82.79149 9... #> 3 8766b54d3ffffff        1 MULTIPOLYGON (((-83.18895 8... #> 4 87679b78effffff        1 MULTIPOLYGON (((-82.85228 9... #> 5 8766b0135ffffff        1 MULTIPOLYGON (((-83.71366 8... #> 6 8766b014cffffff        1 MULTIPOLYGON (((-83.53362 8... table(records$presence) #>  #>   0   1  #> 300 113"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"prepare-predictors","dir":"Articles","previous_headings":"","what":"4. Prepare Predictors","title":"h3sdm workflow for a single model","text":"Prepare environmental predictors extracting values hexagon study area. name bioclimatic variables long, rename shorter format (e.g., Bio1, Bio2, …, Bio19). case select Bio1 (Annual Mean Temperature), Bio12 (Annual Precipitation), Bio15 (Precipitation Seasonality). can visualize one predictors, example Bio1.","code":"predictors <- h3sdm_predictors(cr,                      res = 7,                      num_rasters = bio) #>   |                                                                     |                                                             |   0%  |                                                                     |                                                             |   1%  |                                                                     |=                                                            |   1%  |                                                                     |=                                                            |   2%  |                                                                     |==                                                           |   2%  |                                                                     |==                                                           |   3%  |                                                                     |==                                                           |   4%  |                                                                     |===                                                          |   4%  |                                                                     |===                                                          |   5%  |                                                                     |===                                                          |   6%  |                                                                     |====                                                         |   6%  |                                                                     |====                                                         |   7%  |                                                                     |=====                                                        |   7%  |                                                                     |=====                                                        |   8%  |                                                                     |=====                                                        |   9%  |                                                                     |======                                                       |   9%  |                                                                     |======                                                       |  10%  |                                                                     |======                                                       |  11%  |                                                                     |=======                                                      |  11%  |                                                                     |=======                                                      |  12%  |                                                                     |========                                                     |  12%  |                                                                     |========                                                     |  13%  |                                                                     |========                                                     |  14%  |                                                                     |=========                                                    |  14%  |                                                                     |=========                                                    |  15%  |                                                                     |=========                                                    |  16%  |                                                                     |==========                                                   |  16%  |                                                                     |==========                                                   |  17%  |                                                                     |===========                                                  |  17%  |                                                                     |===========                                                  |  18%  |                                                                     |===========                                                  |  19%  |                                                                     |============                                                 |  19%  |                                                                     |============                                                 |  20%  |                                                                     |=============                                                |  20%  |                                                                     |=============                                                |  21%  |                                                                     |=============                                                |  22%  |                                                                     |==============                                               |  22%  |                                                                     |==============                                               |  23%  |                                                                     |==============                                               |  24%  |                                                                     |===============                                              |  24%  |                                                                     |===============                                              |  25%  |                                                                     |================                                             |  25%  |                                                                     |================                                             |  26%  |                                                                     |================                                             |  27%  |                                                                     |=================                                            |  27%  |                                                                     |=================                                            |  28%  |                                                                     |=================                                            |  29%  |                                                                     |==================                                           |  29%  |                                                                     |==================                                           |  30%  |                                                                     |===================                                          |  30%  |                                                                     |===================                                          |  31%  |                                                                     |===================                                          |  32%  |                                                                     |====================                                         |  32%  |                                                                     |====================                                         |  33%  |                                                                     |====================                                         |  34%  |                                                                     |=====================                                        |  34%  |                                                                     |=====================                                        |  35%  |                                                                     |======================                                       |  35%  |                                                                     |======================                                       |  36%  |                                                                     |======================                                       |  37%  |                                                                     |=======================                                      |  37%  |                                                                     |=======================                                      |  38%  |                                                                     |=======================                                      |  39%  |                                                                     |========================                                     |  39%  |                                                                     |========================                                     |  40%  |                                                                     |=========================                                    |  40%  |                                                                     |=========================                                    |  41%  |                                                                     |=========================                                    |  42%  |                                                                     |==========================                                   |  42%  |                                                                     |==========================                                   |  43%  |                                                                     |===========================                                  |  43%  |                                                                     |===========================                                  |  44%  |                                                                     |===========================                                  |  45%  |                                                                     |============================                                 |  45%  |                                                                     |============================                                 |  46%  |                                                                     |============================                                 |  47%  |                                                                     |=============================                                |  47%  |                                                                     |=============================                                |  48%  |                                                                     |==============================                               |  48%  |                                                                     |==============================                               |  49%  |                                                                     |==============================                               |  50%  |                                                                     |===============================                              |  50%  |                                                                     |===============================                              |  51%  |                                                                     |===============================                              |  52%  |                                                                     |================================                             |  52%  |                                                                     |================================                             |  53%  |                                                                     |=================================                            |  53%  |                                                                     |=================================                            |  54%  |                                                                     |=================================                            |  55%  |                                                                     |==================================                           |  55%  |                                                                     |==================================                           |  56%  |                                                                     |==================================                           |  57%  |                                                                     |===================================                          |  57%  |                                                                     |===================================                          |  58%  |                                                                     |====================================                         |  58%  |                                                                     |====================================                         |  59%  |                                                                     |====================================                         |  60%  |                                                                     |=====================================                        |  60%  |                                                                     |=====================================                        |  61%  |                                                                     |======================================                       |  61%  |                                                                     |======================================                       |  62%  |                                                                     |======================================                       |  63%  |                                                                     |=======================================                      |  63%  |                                                                     |=======================================                      |  64%  |                                                                     |=======================================                      |  65%  |                                                                     |========================================                     |  65%  |                                                                     |========================================                     |  66%  |                                                                     |=========================================                    |  66%  |                                                                     |=========================================                    |  67%  |                                                                     |=========================================                    |  68%  |                                                                     |==========================================                   |  68%  |                                                                     |==========================================                   |  69%  |                                                                     |==========================================                   |  70%  |                                                                     |===========================================                  |  70%  |                                                                     |===========================================                  |  71%  |                                                                     |============================================                 |  71%  |                                                                     |============================================                 |  72%  |                                                                     |============================================                 |  73%  |                                                                     |=============================================                |  73%  |                                                                     |=============================================                |  74%  |                                                                     |=============================================                |  75%  |                                                                     |==============================================               |  75%  |                                                                     |==============================================               |  76%  |                                                                     |===============================================              |  76%  |                                                                     |===============================================              |  77%  |                                                                     |===============================================              |  78%  |                                                                     |================================================             |  78%  |                                                                     |================================================             |  79%  |                                                                     |================================================             |  80%  |                                                                     |=================================================            |  80%  |                                                                     |=================================================            |  81%  |                                                                     |==================================================           |  81%  |                                                                     |==================================================           |  82%  |                                                                     |==================================================           |  83%  |                                                                     |===================================================          |  83%  |                                                                     |===================================================          |  84%  |                                                                     |====================================================         |  84%  |                                                                     |====================================================         |  85%  |                                                                     |====================================================         |  86%  |                                                                     |=====================================================        |  86%  |                                                                     |=====================================================        |  87%  |                                                                     |=====================================================        |  88%  |                                                                     |======================================================       |  88%  |                                                                     |======================================================       |  89%  |                                                                     |=======================================================      |  89%  |                                                                     |=======================================================      |  90%  |                                                                     |=======================================================      |  91%  |                                                                     |========================================================     |  91%  |                                                                     |========================================================     |  92%  |                                                                     |========================================================     |  93%  |                                                                     |=========================================================    |  93%  |                                                                     |=========================================================    |  94%  |                                                                     |==========================================================   |  94%  |                                                                     |==========================================================   |  95%  |                                                                     |==========================================================   |  96%  |                                                                     |===========================================================  |  96%  |                                                                     |===========================================================  |  97%  |                                                                     |===========================================================  |  98%  |                                                                     |============================================================ |  98%  |                                                                     |============================================================ |  99%  |                                                                     |=============================================================|  99%  |                                                                     |=============================================================| 100% predictors <- predictors |>   rename_with(     .cols = contains(\"bio_\"),     .fn = ~ paste0(\"Bio\", str_extract(., \"\\\\d+$\"))   ) predictors <- predictors |>   dplyr::select(h3_address, Bio1, Bio12, Bio15, geometry)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"combine-records-and-predictors","dir":"Articles","previous_headings":"","what":"5. Combine Records and Predictors","title":"h3sdm workflow for a single model","text":"Merge species occurrence records environmental predictors.","code":"dat <- h3sdm_data(records, predictors)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"spatial-cross-validation","dir":"Articles","previous_headings":"","what":"6. Spatial Cross-Validation","title":"h3sdm workflow for a single model","text":"Define spatial blocks cross-validation account spatial autocorrelation. Plot spatial blocks.","code":"scv <- h3sdm_spatial_cv(dat, v = 5, repeats = 1)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"define-recipe-and-model","dir":"Articles","previous_headings":"","what":"7. Define Recipe and Model","title":"h3sdm workflow for a single model","text":"Create modeling recipe specify classification model. start presence–absence data aggregated hexagonal cells. initial data, obtained roughly 100 hexagons presence (presence = 1). pseudo-absences, sampled three times absence hexagons (presence = 0) ensure sufficient coverage. results imbalanced dataset, can bias model toward predicting absences. correct , use step_downsample(presence) themis package. Key points: majority class (pseudo-absence hexagons) reduced. minority class (presence hexagons) remains unchanged. -sampling, dataset balanced, improving model training evaluation. case, -sampling ensures 100 presence hexagons comparable number pseudo-absence hexagons used modeling, preventing bias toward absences retaining full presence information. Now define logistic regression model using parsnip package, tidymodels framework.","code":"receta <- h3sdm_recipe(dat) |>   themis::step_downsample(presence) modelo <- parsnip::logistic_reg() %>%   parsnip::set_engine(\"glm\") %>%   parsnip::set_mode(\"classification\")"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"create-workflow","dir":"Articles","previous_headings":"","what":"8. Create Workflow","title":"h3sdm workflow for a single model","text":"Create workflow combining recipe model.","code":"wf <- h3sdm_workflow(modelo, receta)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"fit-the-model","dir":"Articles","previous_headings":"","what":"9. Fit the Model","title":"h3sdm workflow for a single model","text":"fitting model, need extract presence data dataset. ensures metrics, cross-validation, evaluation focus correctly locations species actually present. Next, fit model using spatial cross-validation scheme. Spatial CV accounts spatial autocorrelation partitioning data spatially distinct folds, providing realistic assessment model performance compared random CV. Key points: presence_data contains hexagons presence = 1. cross-validation folds spatially blocked reduce leakage training test data. model trained validated using folds, ensuring robust performance evaluation.","code":"presence_data <- dat %>%   dplyr::filter(presence == 1) f <- h3sdm_fit_model(wf, scv, presence_data)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"evaluate-model-performance","dir":"Articles","previous_headings":"","what":"10. Evaluate Model Performance","title":"h3sdm workflow for a single model","text":"fitting model, assess performance using cross-validated metrics ROC-AUC, accuracy, TSS, Boyce index. h3sdm_eval_metrics() function computes metrics based fitted model presence data, providing quantitative measure well model distinguishes presence absence across spatial folds. Key points: Metrics computed using spatial cross-validation, results reflect realistic predictive performance. ROC-AUC evaluates discrimination ability; TSS balances sensitivity specificity. Boyce index evaluates well predicted suitability matches observed presences, particularly useful presence-pseudo-absence data. metrics help identify whether model reliably predicts species occurrence. can visualize metrics.","code":"evaluation_metrics <- h3sdm_eval_metrics(   fitted_model  = f$cv_model,   presence_data = presence_data ) evaluation_metrics #> # A tibble: 8 × 6 #>   .metric  .estimator  mean std_err conf_low conf_high #>   <chr>    <chr>      <dbl>   <dbl>    <dbl>     <dbl> #> 1 accuracy binary     0.611  0.0271    0.558     0.664 #> 2 f_meas   binary     0.684  0.0448    0.596     0.771 #> 3 kap      binary     0.217  0.0431    0.132     0.301 #> 4 roc_auc  binary     0.687  0.0370    0.614     0.759 #> 5 sens     binary     0.608  0.0732    0.464     0.751 #> 6 spec     binary     0.759  0.151     0.463     1.06  #> 7 tss      binary     0.345 NA        NA        NA     #> 8 boyce    binary     0.458 NA        NA        NA ggplot(evaluation_metrics, aes(.metric, mean)) +   theme_minimal() +   geom_col(width = 0.03, color = \"dodgerblue3\", fill = \"dodgerblue3\") +   geom_point(size = 3, color = \"orange\") +   ylim(0,1)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"make-predictions","dir":"Articles","previous_headings":"","what":"11. Make Predictions","title":"h3sdm workflow for a single model","text":"Generate spatial predictions species distribution across study area.","code":"p <- h3sdm_predict(f, predictors)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"map","dir":"Articles","previous_headings":"","what":"12. Map","title":"h3sdm workflow for a single model","text":"Now can visualize predictions map.  map represents habitat suitability species across hexagons. values (usually 0 1 logistic model) indicate habitat suitability hexagon species. Interpretation prediction values: Higher values → suitable habitat Lower values → less suitable habitat","code":""},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"model-interpretation-feature-importance-partial-dependence","dir":"Articles","previous_headings":"","what":"13. Model Interpretation: Feature Importance & Partial Dependence","title":"h3sdm workflow for a single model","text":"Finallly, interpret model understand predictors influential affect predictions. First create explainer object using DALEX package.","code":"e <- h3sdm_explain(f$final_model, data = dat) #> Preparation of a new explainer is initiated #>   -> model label       :  h3sdm workflow  #>   -> data              :  413  rows  6  cols  #>   -> target variable   :  413  values  #>   -> predict function  :  custom_predict  #>   -> predicted values  :  No value for predict function target column. (  default  ) #>   -> model_info        :  package tidymodels , ver. 1.4.1 , task classification (  default  )  #>   -> predicted values  :  numerical, min =  1.737835e-05 , mean =  0.4266961 , max =  0.9903545   #>   -> residual function :  difference between y and yhat (  default  ) #>   -> residuals         :  numerical, min =  -0.9903545 , mean =  -0.1530883 , max =  0.9705663   #>   A new explainer has been created!"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"feature-importance","dir":"Articles","previous_headings":"13. Model Interpretation: Feature Importance & Partial Dependence","what":"Feature Importance","title":"h3sdm workflow for a single model","text":"evaluate importance predictor variable using permutation importance. method assesses much model’s performance decreases values predictor randomly shuffled, indicating contribution model. need specify predictor variables evaluate, excluding non-predictor columns. Now compute variable importance. can visualize variable importance.","code":"predictors_to_evaluate <- setdiff(names(e$data), c(\"h3_address\", \"x\", \"y\", \"presence\")) var_imp <- model_parts(   explainer = e,   variables = predictors_to_evaluate ) plot(var_imp)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"partial-dependence-plots","dir":"Articles","previous_headings":"13. Model Interpretation: Feature Importance & Partial Dependence","what":"Partial Dependence Plots","title":"h3sdm workflow for a single model","text":"create partial dependence plots (PDPs) visualize relationship key predictors predicted habitat suitability. PDPs show predicted outcome changes single predictor varies, averaging effects predictors. Now can plot PDPs.  predictors show positive relationship habitat suitability, Bio12 (annual precipitation) Bio1 (mean annual temperature) stand higher importance stronger positive effects. contrast, Bio15 (precipitation seasonality) weaker positive effect, suggesting areas variable rainfall somewhat suitable, less influential Bio12 Bio1.","code":"pdp_glm <- partial_dependence(e, variables = c(\"Bio12\", \"Bio1\", \"Bio15\")) plot(pdp_glm)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"categorize-habitat-suitability","dir":"Articles","previous_headings":"","what":"14. Categorize Habitat Suitability","title":"h3sdm workflow for a single model","text":"can categorize continuous habitat suitability predictions discrete classes easier interpretation. define five categories: “low”, “Low”, “Medium”, “High”, “high”. Now can visualize categorized habitat suitability map.  can also count number hexagons habitat suitability category. Now can create waffle plot visualize distribution habitat suitability categories.","code":"p <- p %>%   mutate(     habitat_cat = cut(       prediction,       breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1),       labels = c(\"Very low\", \"Low\", \"Medium\", \"High\", \"Very high\"),       include.lowest = TRUE     )   ) ggplot() +   theme_minimal() +   geom_sf(data = p, aes(fill = habitat_cat)) +   scale_fill_viridis_d(name = \"Habitat \\ncategory\", option = \"B\", direction = -1, na.translate = FALSE) counts_current <- p |>   st_drop_geometry() |>   count(habitat_cat) |>   drop_na() |>   mutate(scenario = \"Present\") counts_current #>   habitat_cat    n scenario #> 1    Very low 5026  Present #> 2         Low 1058  Present #> 3      Medium 1239  Present #> 4        High 1570  Present #> 5   Very high 1523  Present"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"make-predictios-for-a-future-scenario","dir":"Articles","previous_headings":"","what":"15. Make predictios for a future scenario","title":"h3sdm workflow for a single model","text":"can also make predictions future climate scenarios. use WorldClim future bioclimatic variables Costa Rica environmental predictors. data included ‘h3sdm’ package. three variables included: Bio1 (Annual Mean Temperature), Bio12 (Annual Precipitation), Bio15 (Precipitation Seasonality). Rename layers raster match names used model. prepare future predictors extracting values hexagon study area. Now can make predictions future scenario. can visualize future predictions map.  can categorize continuous habitat suitability predictions discrete classes easier interpretation. define five categories: “low”, “Low”, “Medium”, “High”, “high”. Now can visualize categorized habitat suitability map.  can also count number hexagons habitat suitability category. Now can create waffle plot visualize distribution habitat suitability categories future scenario.  Now can create waffle plot visualize distribution habitat suitability categories present future scenarios.","code":"bio_future <- terra::rast(system.file(\"extdata\", \"bioclim_future.tif\", package = \"h3sdm\")) names(bio_future) <- c(\"Bio1\", \"Bio12\", \"Bio15\") predictors_future <- h3sdm_predictors(cr,                      res = 7,                      num_rasters = bio_future) #>   |                                                                     |                                                             |   0%  |                                                                     |                                                             |   1%  |                                                                     |=                                                            |   1%  |                                                                     |=                                                            |   2%  |                                                                     |==                                                           |   2%  |                                                                     |==                                                           |   3%  |                                                                     |==                                                           |   4%  |                                                                     |===                                                          |   4%  |                                                                     |===                                                          |   5%  |                                                                     |===                                                          |   6%  |                                                                     |====                                                         |   6%  |                                                                     |====                                                         |   7%  |                                                                     |=====                                                        |   7%  |                                                                     |=====                                                        |   8%  |                                                                     |=====                                                        |   9%  |                                                                     |======                                                       |   9%  |                                                                     |======                                                       |  10%  |                                                                     |======                                                       |  11%  |                                                                     |=======                                                      |  11%  |                                                                     |=======                                                      |  12%  |                                                                     |========                                                     |  12%  |                                                                     |========                                                     |  13%  |                                                                     |========                                                     |  14%  |                                                                     |=========                                                    |  14%  |                                                                     |=========                                                    |  15%  |                                                                     |=========                                                    |  16%  |                                                                     |==========                                                   |  16%  |                                                                     |==========                                                   |  17%  |                                                                     |===========                                                  |  17%  |                                                                     |===========                                                  |  18%  |                                                                     |===========                                                  |  19%  |                                                                     |============                                                 |  19%  |                                                                     |============                                                 |  20%  |                                                                     |=============                                                |  20%  |                                                                     |=============                                                |  21%  |                                                                     |=============                                                |  22%  |                                                                     |==============                                               |  22%  |                                                                     |==============                                               |  23%  |                                                                     |==============                                               |  24%  |                                                                     |===============                                              |  24%  |                                                                     |===============                                              |  25%  |                                                                     |================                                             |  25%  |                                                                     |================                                             |  26%  |                                                                     |================                                             |  27%  |                                                                     |=================                                            |  27%  |                                                                     |=================                                            |  28%  |                                                                     |=================                                            |  29%  |                                                                     |==================                                           |  29%  |                                                                     |==================                                           |  30%  |                                                                     |===================                                          |  30%  |                                                                     |===================                                          |  31%  |                                                                     |===================                                          |  32%  |                                                                     |====================                                         |  32%  |                                                                     |====================                                         |  33%  |                                                                     |====================                                         |  34%  |                                                                     |=====================                                        |  34%  |                                                                     |=====================                                        |  35%  |                                                                     |======================                                       |  35%  |                                                                     |======================                                       |  36%  |                                                                     |======================                                       |  37%  |                                                                     |=======================                                      |  37%  |                                                                     |=======================                                      |  38%  |                                                                     |=======================                                      |  39%  |                                                                     |========================                                     |  39%  |                                                                     |========================                                     |  40%  |                                                                     |=========================                                    |  40%  |                                                                     |=========================                                    |  41%  |                                                                     |=========================                                    |  42%  |                                                                     |==========================                                   |  42%  |                                                                     |==========================                                   |  43%  |                                                                     |===========================                                  |  43%  |                                                                     |===========================                                  |  44%  |                                                                     |===========================                                  |  45%  |                                                                     |============================                                 |  45%  |                                                                     |============================                                 |  46%  |                                                                     |============================                                 |  47%  |                                                                     |=============================                                |  47%  |                                                                     |=============================                                |  48%  |                                                                     |==============================                               |  48%  |                                                                     |==============================                               |  49%  |                                                                     |==============================                               |  50%  |                                                                     |===============================                              |  50%  |                                                                     |===============================                              |  51%  |                                                                     |===============================                              |  52%  |                                                                     |================================                             |  52%  |                                                                     |================================                             |  53%  |                                                                     |=================================                            |  53%  |                                                                     |=================================                            |  54%  |                                                                     |=================================                            |  55%  |                                                                     |==================================                           |  55%  |                                                                     |==================================                           |  56%  |                                                                     |==================================                           |  57%  |                                                                     |===================================                          |  57%  |                                                                     |===================================                          |  58%  |                                                                     |====================================                         |  58%  |                                                                     |====================================                         |  59%  |                                                                     |====================================                         |  60%  |                                                                     |=====================================                        |  60%  |                                                                     |=====================================                        |  61%  |                                                                     |======================================                       |  61%  |                                                                     |======================================                       |  62%  |                                                                     |======================================                       |  63%  |                                                                     |=======================================                      |  63%  |                                                                     |=======================================                      |  64%  |                                                                     |=======================================                      |  65%  |                                                                     |========================================                     |  65%  |                                                                     |========================================                     |  66%  |                                                                     |=========================================                    |  66%  |                                                                     |=========================================                    |  67%  |                                                                     |=========================================                    |  68%  |                                                                     |==========================================                   |  68%  |                                                                     |==========================================                   |  69%  |                                                                     |==========================================                   |  70%  |                                                                     |===========================================                  |  70%  |                                                                     |===========================================                  |  71%  |                                                                     |============================================                 |  71%  |                                                                     |============================================                 |  72%  |                                                                     |============================================                 |  73%  |                                                                     |=============================================                |  73%  |                                                                     |=============================================                |  74%  |                                                                     |=============================================                |  75%  |                                                                     |==============================================               |  75%  |                                                                     |==============================================               |  76%  |                                                                     |===============================================              |  76%  |                                                                     |===============================================              |  77%  |                                                                     |===============================================              |  78%  |                                                                     |================================================             |  78%  |                                                                     |================================================             |  79%  |                                                                     |================================================             |  80%  |                                                                     |=================================================            |  80%  |                                                                     |=================================================            |  81%  |                                                                     |==================================================           |  81%  |                                                                     |==================================================           |  82%  |                                                                     |==================================================           |  83%  |                                                                     |===================================================          |  83%  |                                                                     |===================================================          |  84%  |                                                                     |====================================================         |  84%  |                                                                     |====================================================         |  85%  |                                                                     |====================================================         |  86%  |                                                                     |=====================================================        |  86%  |                                                                     |=====================================================        |  87%  |                                                                     |=====================================================        |  88%  |                                                                     |======================================================       |  88%  |                                                                     |======================================================       |  89%  |                                                                     |=======================================================      |  89%  |                                                                     |=======================================================      |  90%  |                                                                     |=======================================================      |  91%  |                                                                     |========================================================     |  91%  |                                                                     |========================================================     |  92%  |                                                                     |========================================================     |  93%  |                                                                     |=========================================================    |  93%  |                                                                     |=========================================================    |  94%  |                                                                     |==========================================================   |  94%  |                                                                     |==========================================================   |  95%  |                                                                     |==========================================================   |  96%  |                                                                     |===========================================================  |  96%  |                                                                     |===========================================================  |  97%  |                                                                     |===========================================================  |  98%  |                                                                     |============================================================ |  98%  |                                                                     |============================================================ |  99%  |                                                                     |=============================================================|  99%  |                                                                     |=============================================================| 100% p_future <- h3sdm_predict(f, predictors_future) p_future <- p_future %>%   mutate(     habitat_cat = cut(       prediction,       breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1),       labels = c(\"Very low\", \"Low\", \"Medium\", \"High\", \"Very high\"),       include.lowest = TRUE     )   ) ggplot() +   theme_minimal() +   geom_sf(data = p_future, aes(fill = habitat_cat)) +   scale_fill_viridis_d(name = \"Habitat \\ncategory\", option = \"B\", direction = -1, na.translate = FALSE) counts_future <- p_future |>   st_drop_geometry() |>   count(habitat_cat) |>   drop_na() |>   mutate(scenario = \"Future\") counts_future #>   habitat_cat    n scenario #> 1    Very low 4969   Future #> 2         Low 1130   Future #> 3      Medium 1197   Future #> 4        High 1567   Future #> 5   Very high 1518   Future"},{"path":"https://manuelspinola.github.io/h3sdm/articles/h3sdm.html","id":"conclusions","dir":"Articles","previous_headings":"","what":"16. Conclusions","title":"h3sdm workflow for a single model","text":"tutorial demonstrated complete SDM workflow single model using h3sdm package. key steps included: Defining study area Loading preparing environmental predictors Fetching species occurrence data Building predictive model spatial cross-validation Evaluating performance making predictions Assessing variable importance Categorizing habitat suitability Making predictions future climate scenarios Comparing habitat suitability present future scenarios workflow demonstrates modeling single species using one model. can easily adapted handle multiple species complex modeling scenarios, illustrated Articles section.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"define-the-area-of-interest","dir":"Articles","previous_headings":"","what":"1. Define the Area of Interest","title":"h3sdm workflow for multiple models","text":"start defining geographical area modeling. use Costa Rica example. file includesd ‘h3sdm’ package.","code":"cr <- cr_outline_c"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"load-environmental-predictors","dir":"Articles","previous_headings":"","what":"2. Load Environmental Predictors","title":"h3sdm workflow for multiple models","text":"use WorldClim historic bioclimatic variables Costa Rica environmental predictors. data included ‘h3sdm’ package.","code":"bio <- terra::rast(system.file(\"extdata\", \"bioclim_current.tif\", package = \"h3sdm\"))"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"load-species-occurrence-data","dir":"Articles","previous_headings":"","what":"3. Load Species Occurrence Data","title":"h3sdm workflow for multiple models","text":"obtain presence–absence data species interest (Silverstoneia flotator). use h3sdm_pa function generate presence pseudo-absence records. limit 10,000 records set ensure presence records retrieved, 300 pseudo-absences generated. different methods generating pseudo-absences; , rely random sampling. Since approximately 100 positive hexagons resolution 7, request three times number (.e., 300) pseudo-absences. resolution, H3 hexagons 5.16 ha size. parameters can adjusted depending specific needs characteristics species modeled.","code":"records <- h3sdm_pa(\"Silverstoneia flotator\", cr, res = 7, limit = 10000, n_neg = 300) head(records) #> Simple feature collection with 6 features and 2 fields #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: -84.06344 ymin: 8.486587 xmax: -82.77295 ymax: 9.643344 #> Geodetic CRS:  WGS 84 #>        h3_address presence                       geometry #> 1 8766b4415ffffff        1 MULTIPOLYGON (((-84.05549 9... #> 2 87679b636ffffff        1 MULTIPOLYGON (((-82.79149 9... #> 3 8766b54d3ffffff        1 MULTIPOLYGON (((-83.18895 8... #> 4 87679b78effffff        1 MULTIPOLYGON (((-82.85228 9... #> 5 8766b0135ffffff        1 MULTIPOLYGON (((-83.71366 8... #> 6 8766b014cffffff        1 MULTIPOLYGON (((-83.53362 8... table(records$presence) #>  #>   0   1  #> 300 113 ggplot() +   theme_minimal() +   geom_sf(data = records, aes(fill = presence))"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"prepare-predictors","dir":"Articles","previous_headings":"","what":"4. Prepare Predictors","title":"h3sdm workflow for multiple models","text":"Prepare environmental predictors extracting values hexagon study area. name bioclimatic variables long, rename shorter format (e.g., Bio1, Bio2, …, Bio19). case select Bio1 (Annual Mean Temperature), Bio12 (Annual Precipitation), Bio15 (Precipitation Seasonality). can visualize one predictors, example Bio1.","code":"predictors <- h3sdm_predictors(cr,                      res = 7,                      num_rasters = bio) #>   |                                                                     |                                                             |   0%  |                                                                     |                                                             |   1%  |                                                                     |=                                                            |   1%  |                                                                     |=                                                            |   2%  |                                                                     |==                                                           |   2%  |                                                                     |==                                                           |   3%  |                                                                     |==                                                           |   4%  |                                                                     |===                                                          |   4%  |                                                                     |===                                                          |   5%  |                                                                     |===                                                          |   6%  |                                                                     |====                                                         |   6%  |                                                                     |====                                                         |   7%  |                                                                     |=====                                                        |   7%  |                                                                     |=====                                                        |   8%  |                                                                     |=====                                                        |   9%  |                                                                     |======                                                       |   9%  |                                                                     |======                                                       |  10%  |                                                                     |======                                                       |  11%  |                                                                     |=======                                                      |  11%  |                                                                     |=======                                                      |  12%  |                                                                     |========                                                     |  12%  |                                                                     |========                                                     |  13%  |                                                                     |========                                                     |  14%  |                                                                     |=========                                                    |  14%  |                                                                     |=========                                                    |  15%  |                                                                     |=========                                                    |  16%  |                                                                     |==========                                                   |  16%  |                                                                     |==========                                                   |  17%  |                                                                     |===========                                                  |  17%  |                                                                     |===========                                                  |  18%  |                                                                     |===========                                                  |  19%  |                                                                     |============                                                 |  19%  |                                                                     |============                                                 |  20%  |                                                                     |=============                                                |  20%  |                                                                     |=============                                                |  21%  |                                                                     |=============                                                |  22%  |                                                                     |==============                                               |  22%  |                                                                     |==============                                               |  23%  |                                                                     |==============                                               |  24%  |                                                                     |===============                                              |  24%  |                                                                     |===============                                              |  25%  |                                                                     |================                                             |  25%  |                                                                     |================                                             |  26%  |                                                                     |================                                             |  27%  |                                                                     |=================                                            |  27%  |                                                                     |=================                                            |  28%  |                                                                     |=================                                            |  29%  |                                                                     |==================                                           |  29%  |                                                                     |==================                                           |  30%  |                                                                     |===================                                          |  30%  |                                                                     |===================                                          |  31%  |                                                                     |===================                                          |  32%  |                                                                     |====================                                         |  32%  |                                                                     |====================                                         |  33%  |                                                                     |====================                                         |  34%  |                                                                     |=====================                                        |  34%  |                                                                     |=====================                                        |  35%  |                                                                     |======================                                       |  35%  |                                                                     |======================                                       |  36%  |                                                                     |======================                                       |  37%  |                                                                     |=======================                                      |  37%  |                                                                     |=======================                                      |  38%  |                                                                     |=======================                                      |  39%  |                                                                     |========================                                     |  39%  |                                                                     |========================                                     |  40%  |                                                                     |=========================                                    |  40%  |                                                                     |=========================                                    |  41%  |                                                                     |=========================                                    |  42%  |                                                                     |==========================                                   |  42%  |                                                                     |==========================                                   |  43%  |                                                                     |===========================                                  |  43%  |                                                                     |===========================                                  |  44%  |                                                                     |===========================                                  |  45%  |                                                                     |============================                                 |  45%  |                                                                     |============================                                 |  46%  |                                                                     |============================                                 |  47%  |                                                                     |=============================                                |  47%  |                                                                     |=============================                                |  48%  |                                                                     |==============================                               |  48%  |                                                                     |==============================                               |  49%  |                                                                     |==============================                               |  50%  |                                                                     |===============================                              |  50%  |                                                                     |===============================                              |  51%  |                                                                     |===============================                              |  52%  |                                                                     |================================                             |  52%  |                                                                     |================================                             |  53%  |                                                                     |=================================                            |  53%  |                                                                     |=================================                            |  54%  |                                                                     |=================================                            |  55%  |                                                                     |==================================                           |  55%  |                                                                     |==================================                           |  56%  |                                                                     |==================================                           |  57%  |                                                                     |===================================                          |  57%  |                                                                     |===================================                          |  58%  |                                                                     |====================================                         |  58%  |                                                                     |====================================                         |  59%  |                                                                     |====================================                         |  60%  |                                                                     |=====================================                        |  60%  |                                                                     |=====================================                        |  61%  |                                                                     |======================================                       |  61%  |                                                                     |======================================                       |  62%  |                                                                     |======================================                       |  63%  |                                                                     |=======================================                      |  63%  |                                                                     |=======================================                      |  64%  |                                                                     |=======================================                      |  65%  |                                                                     |========================================                     |  65%  |                                                                     |========================================                     |  66%  |                                                                     |=========================================                    |  66%  |                                                                     |=========================================                    |  67%  |                                                                     |=========================================                    |  68%  |                                                                     |==========================================                   |  68%  |                                                                     |==========================================                   |  69%  |                                                                     |==========================================                   |  70%  |                                                                     |===========================================                  |  70%  |                                                                     |===========================================                  |  71%  |                                                                     |============================================                 |  71%  |                                                                     |============================================                 |  72%  |                                                                     |============================================                 |  73%  |                                                                     |=============================================                |  73%  |                                                                     |=============================================                |  74%  |                                                                     |=============================================                |  75%  |                                                                     |==============================================               |  75%  |                                                                     |==============================================               |  76%  |                                                                     |===============================================              |  76%  |                                                                     |===============================================              |  77%  |                                                                     |===============================================              |  78%  |                                                                     |================================================             |  78%  |                                                                     |================================================             |  79%  |                                                                     |================================================             |  80%  |                                                                     |=================================================            |  80%  |                                                                     |=================================================            |  81%  |                                                                     |==================================================           |  81%  |                                                                     |==================================================           |  82%  |                                                                     |==================================================           |  83%  |                                                                     |===================================================          |  83%  |                                                                     |===================================================          |  84%  |                                                                     |====================================================         |  84%  |                                                                     |====================================================         |  85%  |                                                                     |====================================================         |  86%  |                                                                     |=====================================================        |  86%  |                                                                     |=====================================================        |  87%  |                                                                     |=====================================================        |  88%  |                                                                     |======================================================       |  88%  |                                                                     |======================================================       |  89%  |                                                                     |=======================================================      |  89%  |                                                                     |=======================================================      |  90%  |                                                                     |=======================================================      |  91%  |                                                                     |========================================================     |  91%  |                                                                     |========================================================     |  92%  |                                                                     |========================================================     |  93%  |                                                                     |=========================================================    |  93%  |                                                                     |=========================================================    |  94%  |                                                                     |==========================================================   |  94%  |                                                                     |==========================================================   |  95%  |                                                                     |==========================================================   |  96%  |                                                                     |===========================================================  |  96%  |                                                                     |===========================================================  |  97%  |                                                                     |===========================================================  |  98%  |                                                                     |============================================================ |  98%  |                                                                     |============================================================ |  99%  |                                                                     |=============================================================|  99%  |                                                                     |=============================================================| 100% predictors <- predictors |>   rename_with(     .cols = contains(\"bio_\"),     .fn = ~ paste0(\"Bio\", str_extract(., \"\\\\d+$\"))   ) predictors <- predictors |>   dplyr::select(h3_address, Bio1, Bio12, Bio15, geometry) ggplot() +   theme_minimal() +   geom_sf(data = predictors, aes(fill = Bio1)) +   scale_fill_viridis_c(option = \"B\")"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"combine-records-and-predictors","dir":"Articles","previous_headings":"","what":"5. Combine Records and Predictors","title":"h3sdm workflow for multiple models","text":"Merge species occurrence records environmental predictors.","code":"dat <- h3sdm_data(records, predictors)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"spatial-cross-validation","dir":"Articles","previous_headings":"","what":"6. Spatial Cross-Validation","title":"h3sdm workflow for multiple models","text":"Define spatial blocks cross-validation account spatial autocorrelation. Plot spatial blocks.","code":"scv <- h3sdm_spatial_cv(dat, v = 5, repeats = 1) autoplot(scv)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"define-recipe-and-models-multiple-models","dir":"Articles","previous_headings":"","what":"7. Define Recipe and Models (multiple models)","title":"h3sdm workflow for multiple models","text":"Create modeling recipe specify classification model. start presence–absence data aggregated hexagonal cells. initial data, obtained roughly 100 hexagons presence (presence = 1). pseudo-absences, sampled three times absence hexagons (presence = 0) ensure sufficient coverage. results imbalanced dataset, can bias model toward predicting absences. correct , use step_downsample(presence) themis package. Key points: majority class (pseudo-absence hexagons) reduced. minority class (presence hexagons) remains unchanged. -sampling, dataset balanced, improving model training evaluation. case, -sampling ensures 100 presence hexagons comparable number pseudo-absence hexagons used modeling, preventing bias toward absences retaining full presence information. Now define one model using parsnip package, tidymodels framework.","code":"receta <- h3sdm_recipe(dat) |>   themis::step_downsample(presence) |>   step_dummy(all_nominal_predictors()) # Define your models using parsnip # Modelos con defaults mod_log <- logistic_reg() %>%   set_engine(\"glm\") %>%   set_mode(\"classification\")  mod_rf <- rand_forest() %>%   set_engine(\"ranger\") %>%   set_mode(\"classification\")  mod_xgb <- boost_tree() %>%        # usa defaults   set_engine(\"xgboost\") %>%   set_mode(\"classification\")  # Create a named list of the models my_models <- list(   reg_log = mod_log,   random_forest = mod_rf,   xgboost = mod_xgb )"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"create-workflows","dir":"Articles","previous_headings":"","what":"8. Create Workflows","title":"h3sdm workflow for multiple models","text":"","code":"wfs <- h3sdm_workflows(my_models, receta) wfs #> $reg_log #> ══ Workflow ═══════════════════════════════════════════════════════════ #> Preprocessor: Recipe #> Model: logistic_reg() #>  #> ── Preprocessor ─────────────────────────────────────────────────────── #> 2 Recipe Steps #>  #> • step_downsample() #> • step_dummy() #>  #> ── Model ────────────────────────────────────────────────────────────── #> Logistic Regression Model Specification (classification) #>  #> Computational engine: glm  #>  #>  #> $random_forest #> ══ Workflow ═══════════════════════════════════════════════════════════ #> Preprocessor: Recipe #> Model: rand_forest() #>  #> ── Preprocessor ─────────────────────────────────────────────────────── #> 2 Recipe Steps #>  #> • step_downsample() #> • step_dummy() #>  #> ── Model ────────────────────────────────────────────────────────────── #> Random Forest Model Specification (classification) #>  #> Computational engine: ranger  #>  #>  #> $xgboost #> ══ Workflow ═══════════════════════════════════════════════════════════ #> Preprocessor: Recipe #> Model: boost_tree() #>  #> ── Preprocessor ─────────────────────────────────────────────────────── #> 2 Recipe Steps #>  #> • step_downsample() #> • step_dummy() #>  #> ── Model ────────────────────────────────────────────────────────────── #> Boosted Tree Model Specification (classification) #>  #> Computational engine: xgboost"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"fit-the-models","dir":"Articles","previous_headings":"","what":"9. Fit the Models","title":"h3sdm workflow for multiple models","text":"fitting model, need extract presence data dataset. ensures metrics, cross-validation, evaluation focus correctly locations species actually present. Next, fit models using spatial cross-validation scheme. Spatial CV accounts spatial autocorrelation partitioning data spatially distinct folds, providing realistic assessment model performance compared random CV.","code":"presence_data <- dat %>%   dplyr::filter(presence == 1) several <- h3sdm_fit_models(wfs, scv, presence_data)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"evaluate-and-compare-models","dir":"Articles","previous_headings":"","what":"10. Evaluate and Compare Models","title":"h3sdm workflow for multiple models","text":"ROC AUC (roc_auc) → evaluates model’s ability discriminate presence absence/pseudo-absence, regardless threshold. standard metric probabilistic classification. Maximum TSS (tss_max) → combines sensitivity specificity single threshold-dependent value, showing well model predicts presences absences simultaneously. Boyce index (boyce) → measures model’s ability predict species distribution continuously assesses whether areas higher predicted values coincide observed presences.","code":"compare <- h3sdm_compare_models(several) compare #> # A tibble: 9 × 7 #>   model         .metric .estimator  mean std_err conf_low conf_high #>   <chr>         <chr>   <chr>      <dbl>   <dbl>    <dbl>     <dbl> #> 1 random_forest boyce   binary     0.85  NA        NA        NA     #> 2 random_forest roc_auc binary     0.815  0.0410    0.735     0.895 #> 3 xgboost       roc_auc binary     0.806  0.0323    0.742     0.869 #> 4 reg_log       roc_auc binary     0.728  0.0527    0.625     0.831 #> 5 xgboost       boyce   binary     0.544 NA        NA        NA     #> 6 reg_log       boyce   binary     0.524 NA        NA        NA     #> 7 xgboost       tss     binary     0.515 NA        NA        NA     #> 8 random_forest tss     binary     0.510 NA        NA        NA     #> 9 reg_log       tss     binary     0.419 NA        NA        NA ggplot(compare, aes(.metric, mean)) +   geom_col(width = 0.03) +   geom_point(size = 2) +   facet_wrap(~model)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"select-the-best-model-and-make-predictions","dir":"Articles","previous_headings":"","what":"11. Select the Best Model and make Predictions","title":"h3sdm workflow for multiple models","text":"","code":"p_rf <- h3sdm_predict(several$models$random_forest, predictors) p_rf #> Simple feature collection with 10417 features and 7 fields #> Geometry type: MULTIPOLYGON #> Dimension:     XY #> Bounding box:  xmin: -85.95025 ymin: 8.039627 xmax: -82.55232 ymax: 11.21976 #> Geodetic CRS:  WGS 84 #> First 10 features: #>         h3_address     Bio1    Bio12    Bio15 #> 1  876d6854dffffff 26.61501 1632.814 94.14928 #> 2  876d6bb8effffff 26.62722 2215.888 92.49077 #> 3  87679b4f5ffffff 25.08632 3023.892 26.03154 #> 4  8766b5d82ffffff 13.71321 3982.812 37.47940 #> 5  8766b4528ffffff 15.85883 2214.000 75.75454 #> 6  876d68adaffffff 23.29059 2412.908 69.25448 #> 7  876d6d625ffffff 26.03058 3024.874 47.24875 #> 8  876d6878affffff 26.30600 1746.000 91.93986 #> 9  8766b4ab5ffffff 20.26178 2883.596 41.66865 #> 10 876d69c94ffffff 22.67291 2361.003 70.83282 #>                          geometry         x         y prediction #> 1  MULTIPOLYGON (((-85.61874 1... -85.61355 10.744993 0.00040000 #> 2  MULTIPOLYGON (((-85.2204 9.... -85.21517  9.805806 0.00040000 #> 3  MULTIPOLYGON (((-83.01133 9... -83.00602  9.806921 0.64563651 #> 4  MULTIPOLYGON (((-83.07362 9... -83.06830  9.295924 0.04896746 #> 5  MULTIPOLYGON (((-83.93635 9... -83.93107  9.638151 0.01320079 #> 6  MULTIPOLYGON (((-85.04019 1... -85.03497 10.579597 0.06870317 #> 7  MULTIPOLYGON (((-84.50184 1... -84.49660 10.874768 0.44585873 #> 8  MULTIPOLYGON (((-85.69967 1... -85.69448 10.433590 0.01978492 #> 9  MULTIPOLYGON (((-83.32541 9... -83.32010  9.539664 0.06742143 #> 10 MULTIPOLYGON (((-84.94068 1... -84.93545 10.420003 0.01693571"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"map","dir":"Articles","previous_headings":"","what":"12. Map","title":"h3sdm workflow for multiple models","text":"Now can visualize predictions map.  map represents habitat suitability species across hexagons. values (usually 0 1 logistic model) indicate habitat suitability hexagon species. Interpretation prediction values: Higher values → suitable habitat Lower values → less suitable habitat","code":"ggplot() +   theme_minimal() +   geom_sf(data = p_rf, aes(fill = prediction)) +   scale_fill_viridis_c(name = \"Habitat \\nsuitability\",option = \"B\", direction = -1)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"model-interpretation-feature-importance-partial-dependence","dir":"Articles","previous_headings":"","what":"13. Model Interpretation: Feature Importance & Partial Dependence","title":"h3sdm workflow for multiple models","text":"Finallly, interpret model understand predictors influential affect predictions. First, extract fitted random forest model list models. create explainer object using DALEX package.","code":"rf_fitted <- several$models$random_forest$final_model e <- h3sdm_explain(rf_fitted, data = dat) #> Preparation of a new explainer is initiated #>   -> model label       :  h3sdm workflow  #>   -> data              :  413  rows  6  cols  #>   -> target variable   :  413  values  #>   -> predict function  :  custom_predict  #>   -> predicted values  :  No value for predict function target column. (  default  ) #>   -> model_info        :  package tidymodels , ver. 1.4.1 , task classification (  default  )  #>   -> predicted values  :  numerical, min =  0 , mean =  0.3909763 , max =  0.9979444   #>   -> residual function :  difference between y and yhat (  default  ) #>   -> residuals         :  numerical, min =  -0.9893992 , mean =  -0.1173685 , max =  0.9757206   #>   A new explainer has been created!"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"feature-importance","dir":"Articles","previous_headings":"13. Model Interpretation: Feature Importance & Partial Dependence","what":"Feature Importance","title":"h3sdm workflow for multiple models","text":"evaluate importance predictor variable using permutation importance. method assesses much model’s performance decreases values predictor randomly shuffled, indicating contribution model. need specify predictor variables evaluate, excluding non-predictor columns. Now compute variable importance. can visualize variable importance.","code":"predictors_to_evaluate <- setdiff(names(e$data), c(\"h3_address\", \"x\", \"y\", \"presence\")) var_imp <- model_parts(   explainer = e,   variables = predictors_to_evaluate ) plot(var_imp)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"partial-dependence-plots","dir":"Articles","previous_headings":"13. Model Interpretation: Feature Importance & Partial Dependence","what":"Partial Dependence Plots","title":"h3sdm workflow for multiple models","text":"create partial dependence plots (PDPs) visualize relationship key predictors predicted habitat suitability. PDPs show predicted outcome changes single predictor varies, averaging effects predictors. Now can plot PDPs.  predictors show positive relationship habitat suitability, Bio12 (annual precipitation) Bio1 (mean annual temperature) stand higher importance stronger positive effects. contrast, Bio15 (precipitation seasonality) weaker positive effect, suggesting areas variable rainfall somewhat suitable, less influential Bio12 Bio1.","code":"pdp_glm <- partial_dependence(e, variables = c(\"Bio12\", \"Bio1\", \"Bio15\")) plot(pdp_glm)"},{"path":"https://manuelspinola.github.io/h3sdm/articles/multi_model_workflow.html","id":"conclusions","dir":"Articles","previous_headings":"","what":"14. Conclusions","title":"h3sdm workflow for multiple models","text":"tutorial demonstrated complete SDM workflow multiple models using h3sdm package. key steps included: Defining study area Loading preparing environmental predictors Fetching species occurrence data Building several predictive models spatial cross-validation Evaluating performance makingpredictions Assessing variable importance workflow demonstrates modeling single species using one model.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Manuel Spínola. Author, maintainer.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Spínola M (2025). h3sdm: Species Distribution Modeling H3 Grids. R package version 0.1.0, https://github.com/ManuelSpinola/h3sdm.","code":"@Manual{,   title = {h3sdm: Species Distribution Modeling with H3 Grids},   author = {Manuel Spínola},   year = {2025},   note = {R package version 0.1.0},   url = {https://github.com/ManuelSpinola/h3sdm}, }"},{"path":"https://manuelspinola.github.io/h3sdm/index.html","id":"h3sdm","dir":"","previous_headings":"","what":"Species Distribution Modeling with H3 Grids","title":"Species Distribution Modeling with H3 Grids","text":"h3sdm: Machine learning–based spatial species distribution modeling habitat/landscape analysis using H3 spatial index grids.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Species Distribution Modeling with H3 Grids","text":"h3sdm R package species distribution modeling (SDM) habitat analysis using hexagonal spatial index grids based H3. provides consistent spatial framework combine species occurrence data environmental predictors landscape metrics, enabling ecological modeling habitat characterization. modeling framework built tidymodels, offering flexibility use different approaches (e.g., logistic regression, GAMs, Random Forest, XGBoost). Key features include: Conversion point occurrence data H3-based spatial grids Extraction environmental landscape predictors different resolutions Support multiple modeling approaches tidymodels Tools visualizing model predictions habitat structure leveraging H3 grids tidymodels ecosystem, h3sdm makes easy bridge species distribution modeling landscape ecology scalable way.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Species Distribution Modeling with H3 Grids","text":"can install development version h3sdm GitHub using one following methods:","code":"# install.packages(\"pak\") pak::pak(\"ManuelSpinola/h3sdm\") # install.packages(\"remotes\") remotes::install_github(\"ManuelSpinola/h3sdm\") # install.packages(\"devtools\") devtools::install_github(\"ManuelSpinola/h3sdm\")"},{"path":"https://manuelspinola.github.io/h3sdm/index.html","id":"get-started","dir":"","previous_headings":"","what":"Get Started","title":"Species Distribution Modeling with H3 Grids","text":"Explore h3sdm Get Started section website, provides quick introduction package core workflows. practical examples, visit Articles section, vignette demonstrates different aspects species distribution habitat analysis using H3 grids.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_current.html","id":null,"dir":"Reference","previous_headings":"","what":"Current bioclimatic raster — bioclim_current","title":"Current bioclimatic raster — bioclim_current","text":"GeoTIFF current bioclimatic variables Costa Rica.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_current.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Current bioclimatic raster — bioclim_current","text":"GeoTIFF file, readable terra::rast().","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_current.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Current bioclimatic raster — bioclim_current","text":"file stored inst/extdata/ can accessed : terra::rast(system.file(\"extdata\", \"bioclim_current.tif\", package = \"h3sdm\"))","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_current.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Current bioclimatic raster — bioclim_current","text":"","code":"library(terra) #> terra 1.8.70 bio <- terra::rast(system.file(\"extdata\", \"bioclim_current.tif\", package = \"h3sdm\"))"},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_future.html","id":null,"dir":"Reference","previous_headings":"","what":"Future bioclimatic raster — bioclim_future","title":"Future bioclimatic raster — bioclim_future","text":"GeoTIFF projected bioclimatic variables Costa Rica.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_future.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Future bioclimatic raster — bioclim_future","text":"GeoTIFF file, readable terra::rast().","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_future.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Future bioclimatic raster — bioclim_future","text":"dataset corresponds climate projection: Model: INM-CM4-8 Scenario: SSP1-2.6 Period: 2021–2040 file stored inst/extdata/ can accessed : terra::rast(system.file(\"extdata\", \"bioclim_future.tif\", package = \"h3sdm\"))","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/bioclim_future.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Future bioclimatic raster — bioclim_future","text":"","code":"library(terra) bio <- terra::rast(system.file(\"extdata\", \"bioclim_future.tif\", package = \"h3sdm\"))"},{"path":"https://manuelspinola.github.io/h3sdm/reference/cr_outline_c.html","id":null,"dir":"Reference","previous_headings":"","what":"Costa Rica Continental Outline — cr_outline_c","title":"Costa Rica Continental Outline — cr_outline_c","text":"simplified outline Costa Rica sf object.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/cr_outline_c.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Costa Rica Continental Outline — cr_outline_c","text":"","code":"cr_outline_c"},{"path":"https://manuelspinola.github.io/h3sdm/reference/cr_outline_c.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Costa Rica Continental Outline — cr_outline_c","text":"sf object containing polygon geometry Costa Rica.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/cr_outline_c.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Costa Rica Continental Outline — cr_outline_c","text":"Adapted publicly available geographic data.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/cr_outline_c.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Costa Rica Continental Outline — cr_outline_c","text":"","code":"library(sf) #> Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE plot(cr_outline_c)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_classify.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify predictions based on an optimal threshold — h3sdm_classify","title":"Classify predictions based on an optimal threshold — h3sdm_classify","text":"Converts continuous probability predictions binary presence/absence based specified threshold.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_classify.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify predictions based on an optimal threshold — h3sdm_classify","text":"","code":"h3sdm_classify(predictions_sf, threshold)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_classify.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify predictions based on an optimal threshold — h3sdm_classify","text":"predictions_sf sf object containing numeric column named prediction, typically produced h3sdm_predict(). threshold numeric value representing probability threshold (e.g., 0.45) predictions classified presence (1).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_classify.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify predictions based on an optimal threshold — h3sdm_classify","text":"sf object geometry original columns, plus new integer column predicted_presence values 0 (absence) 1 (presence).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_classify.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Classify predictions based on an optimal threshold — h3sdm_classify","text":"function useful converting continuous probability outputs binary presence/absence data mapping model evaluation purposes.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_classify.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Classify predictions based on an optimal threshold — h3sdm_classify","text":"","code":"if (FALSE) { # \\dontrun{ library(sf) library(dplyr)  # Crear un sf de ejemplo df <- data.frame(   id = 1:5,   prediction = c(0.2, 0.6, 0.45, 0.8, 0.3),   lon = c(-75, -74, -73, -72, -71),   lat = c(10, 11, 12, 13, 14) )  df_sf <- st_as_sf(df, coords = c(\"lon\", \"lat\"), crs = 4326)  # Clasificar usando un umbral classified_sf <- h3sdm_classify(df_sf, threshold = 0.5)  # Revisar resultados print(classified_sf) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_compare_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare multiple H3SDM species distribution models — h3sdm_compare_models","title":"Compare multiple H3SDM species distribution models — h3sdm_compare_models","text":"Computes combines performance metrics multiple species distribution models created h3sdm_fit_models() similar workflows. Metrics include standard yardstick metrics (ROC AUC, TSS, Boyce index, etc.). Returns tibble summarizing model performance.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_compare_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare multiple H3SDM species distribution models — h3sdm_compare_models","text":"","code":"h3sdm_compare_models(h3sdm_results)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_compare_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare multiple H3SDM species distribution models — h3sdm_compare_models","text":"h3sdm_results list workflow set containing fitted models metrics tibble. Typically, object output h3sdm_fit_models().","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_compare_models.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare multiple H3SDM species distribution models — h3sdm_compare_models","text":"tibble one row per model per metric, containing: model Model name .metric Metric name (ROC AUC, TSS, Boyce, etc.) .estimator Metric type (usually \"binary\") mean Metric value","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_compare_models.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare multiple H3SDM species distribution models — h3sdm_compare_models","text":"","code":"# \\donttest{ # Minimal reproducible example example_metrics <- tibble::tibble(   model = c(\"model1\", \"model2\"),   .metric = c(\"roc_auc\", \"tss_max\"),   .estimator = c(\"binary\", \"binary\"),   mean = c(0.85, 0.7) ) example_results <- list(metrics = example_metrics) h3sdm_compare_models(example_results) #> # A tibble: 1 × 4 #>   model  .metric .estimator  mean #>   <chr>  <chr>   <chr>      <dbl> #> 1 model1 roc_auc binary      0.85 # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine species and environmental data for SDMs using H3 grids — h3sdm_data","title":"Combine species and environmental data for SDMs using H3 grids — h3sdm_data","text":"Combines species presence–absence data environmental predictors. also calculates centroid coordinates (x y) hexagon grid cell.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine species and environmental data for SDMs using H3 grids — h3sdm_data","text":"","code":"h3sdm_data(pa_sf, predictors_sf)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine species and environmental data for SDMs using H3 grids — h3sdm_data","text":"pa_sf sf object h3sdm_pa() containing species presence–absence data. predictors_sf sf object h3sdm_predictors() containing environmental predictors.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine species and environmental data for SDMs using H3 grids — h3sdm_data","text":"sf object containing species presence–absence, environmental predictor variables, centroid coordinates hexagon cell.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Combine species and environmental data for SDMs using H3 grids — h3sdm_data","text":"","code":"if (FALSE) { # \\dontrun{ my_species_pa <- h3sdm_pa(\"Panthera onca\", res = 6) my_predictors <- h3sdm_predictors(my_species_pa) combined_data <- h3sdm_data(my_species_pa, my_predictors) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_eval_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","title":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","text":"Computes set performance metrics single fitted species distribution model. Includes standard yardstick metrics ROC AUC, accuracy, sensitivity, specificity, F1-score, Kappa, well ecological metrics True Skill Statistic (TSS) Boyce index. function designed helper evaluating models produced h3sdm_fit_model h3sdm_fit_models.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_eval_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","text":"","code":"h3sdm_eval_metrics(   fitted_model,   presence_data = NULL,   truth_col = \"presence\",   pred_col = \".pred_1\" )"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_eval_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","text":"fitted_model fitted model object, typically output h3sdm_fit_model(). presence_data Optional. sf object tibble containing presence locations used compute Boyce index. provided, Boyce index calculated. truth_col Character. Name column containing true presence/absence values (default \"presence\"). pred_col Character. Name column containing predicted probabilities (default \".pred_1\").","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_eval_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","text":"tibble one row per metric, containing: .metric Metric name (e.g., \"roc_auc\", \"tss\", \"boyce\"). .estimator Estimator type (usually \"binary\"). mean Metric value. std_err Standard error (NA TSS Boyce). conf_low Lower bound 95% confidence interval (NA TSS Boyce). conf_high Upper bound 95% confidence interval (NA TSS Boyce).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_eval_metrics.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","text":"function centralizes model evaluation single fitted H3SDM model, combining general classification metrics ecological indices. especially useful systematically comparing model performance across species modeling approaches.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_eval_metrics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Evaluate performance metrics for a fitted H3SDM model — h3sdm_eval_metrics","text":"","code":"if (FALSE) { # \\dontrun{ # Assuming 'fitted' is the result of h3sdm_fit_model() metrics <- h3sdm_eval_metrics(   fitted_model = fitted,   presence_data = presence_sf,   truth_col = \"presence\",   pred_col = \".pred_1\" ) print(metrics) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_explain.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a DALEX explainer for h3sdm workflows — h3sdm_explain","title":"Create a DALEX explainer for h3sdm workflows — h3sdm_explain","text":"Creates DALEX explainer species distribution model fitted h3sdm_fit_model(). Prepares response predictor variables, ensuring columns used model training (including h3_address coordinates) included. explainer can used feature importance, model residuals, DALEX diagnostics.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_explain.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a DALEX explainer for h3sdm workflows — h3sdm_explain","text":"","code":"h3sdm_explain(model, data, response = \"presence\", label = \"h3sdm workflow\")"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_explain.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a DALEX explainer for h3sdm workflows — h3sdm_explain","text":"model fitted workflow returned h3sdm_fit_model(). data data.frame sf object containing original predictors response variable. sf object, geometry dropped automatically. response Character string specifying name response column. Must binary factor numeric vector (0/1). Defaults \"presence\". label Character string specifying label explainer. Defaults \"h3sdm workflow\".","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_explain.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a DALEX explainer for h3sdm workflows — h3sdm_explain","text":"object class explainer DALEX package, ready used feature_importance(), model_performance(), predict_parts(), DALEX functions.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_explain.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a DALEX explainer for h3sdm workflows — h3sdm_explain","text":"","code":"# \\donttest{ library(h3sdm) library(DALEX) #> Welcome to DALEX (version: 2.5.3). #> Find examples and detailed introduction at: http://ema.drwhy.ai/ #> Additional features will be available after installation of: ggpubr. #> Use 'install_dependencies()' to get all suggested dependencies library(parsnip)  dat <- data.frame(   x1 = rnorm(20),   x2 = rnorm(20),   presence = factor(sample(0:1, 20, replace = TRUE)) )  model <- logistic_reg() |>   fit(presence ~ x1 + x2, data = dat)  explainer <- h3sdm_explain(model, data = dat, response = \"presence\") #> Preparation of a new explainer is initiated #>   -> model label       :  h3sdm workflow  #>   -> data              :  20  rows  2  cols  #>   -> target variable   :  20  values  #>   -> predict function  :  custom_predict  #>   -> predicted values  :  No value for predict function target column. (  default  ) #>   -> model_info        :  package parsnip , ver. 1.3.3 , task classification (  default  )  #>   -> predicted values  :  numerical, min =  0.1280309 , mean =  0.55 , max =  0.8785783   #>   -> residual function :  difference between y and yhat (  default  ) #>   -> residuals         :  numerical, min =  -0.6732493 , mean =  1.46082e-09 , max =  0.6482832   #>   A new explainer has been created!   feature_importance(explainer) #>       variable mean_dropout_loss          label #> 1 _full_model_         0.3535354 h3sdm workflow #> 2           x1         0.3070707 h3sdm workflow #> 3           x2         0.4525253 h3sdm workflow #> 4   _baseline_         0.5151515 h3sdm workflow # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fits an SDM workflow to data using resampling and prepares it for stacking. — h3sdm_fit_model","title":"Fits an SDM workflow to data using resampling and prepares it for stacking. — h3sdm_fit_model","text":"Fits Species Distribution Model (SDM) workflow resampling data (cross-validation). function main training step optionally configures results used 'stacks' package.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fits an SDM workflow to data using resampling and prepares it for stacking. — h3sdm_fit_model","text":"","code":"h3sdm_fit_model(   workflow,   data_split,   presence_data = NULL,   truth_col = \"presence\",   pred_col = \".pred_1\",   for_stacking = FALSE,   ... )"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fits an SDM workflow to data using resampling and prepares it for stacking. — h3sdm_fit_model","text":"workflow 'workflow' object tidymodels (e.g., GAM Random Forest). data_split 'rsplit' 'rset' object (e.g., result vfold_cv spatial_block_cv). presence_data (Optional) Original presence data (used extended metrics). truth_col Column name response variable (defaults \"presence\"). pred_col Column name prediction class interest (defaults \".pred_1\"). for_stacking Logical. TRUE, uses control_stack_resamples() save workflow information required 'stacks' package. FALSE, uses standard control save_pred = TRUE. ... Arguments passed functions (e.g., tune::fit_resamples needed).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fits an SDM workflow to data using resampling and prepares it for stacking. — h3sdm_fit_model","text":"list three elements: cv_model: result fit_resamples(). final_model: model fitted entire training set (first split). metrics: Extended evaluation metrics (presence_data provided).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit and evaluate multiple H3SDM species distribution models — h3sdm_fit_models","title":"Fit and evaluate multiple H3SDM species distribution models — h3sdm_fit_models","text":"Fits one species distribution models using tidymodels workflows specified resampling scheme, computes standard metrics (ROC AUC, accuracy, sensitivity, specificity, F1-score, Kappa) along TSS (True Skill Statistic) Boyce index model evaluation. Returns fitted models comparative metrics table.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit and evaluate multiple H3SDM species distribution models — h3sdm_fit_models","text":"","code":"h3sdm_fit_models(   workflows,   data_split,   presence_data = NULL,   truth_col = \"presence\",   pred_col = \".pred_1\" )"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit and evaluate multiple H3SDM species distribution models — h3sdm_fit_models","text":"workflows named list tidymodels workflows created h3sdm_workflow() manually. data_split resampling object (e.g., vfold_cv() h3sdm_spatial_cv()) cross-validation. presence_data sf object tibble presence locations compute Boyce index (optional). truth_col Character. Name column containing true presence/absence values (default \"presence\"). pred_col Character. Name column containing predicted probabilities (default \".pred_1\").","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_models.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit and evaluate multiple H3SDM species distribution models — h3sdm_fit_models","text":"list two elements: models list fitted models returned h3sdm_fit_model(). metrics tibble one row per model per metric, including standard yardstick metrics, TSS, Boyce index.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_fit_models.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit and evaluate multiple H3SDM species distribution models — h3sdm_fit_models","text":"","code":"if (FALSE) { # \\dontrun{ # Example requires prepared recipes and resampling objects mod_log <- logistic_reg() %>%   set_engine(\"glm\") %>%   set_mode(\"classification\")  mod_rf <- rand_forest() %>%   set_engine(\"ranger\") %>%   set_mode(\"classification\")  workflows_list <- list(   logistic = h3sdm_workflow(mod_log, my_recipe),   rf       = h3sdm_workflow(mod_rf, my_recipe) )  results <- h3sdm_fit_models(   workflows     = workflows_list,   data_split    = my_cv_folds,   presence_data = presence_sf ) metrics_table <- results$metrics } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_pa.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample Presence-Absence Data for a Species in Hexagonal Grid — h3sdm_pa","title":"Sample Presence-Absence Data for a Species in Hexagonal Grid — h3sdm_pa","text":"Generates presence-absence points species specified AOI using H3 hexagons. Retrieves occurrence records specified providers (e.g., GBIF), aggregates hexagon resolution, samples pseudo-absence points. Useful building species distribution models using hexagonal grids.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_pa.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample Presence-Absence Data for a Species in Hexagonal Grid — h3sdm_pa","text":"","code":"h3sdm_pa(   species,   aoi_sf,   res = 6,   n_neg = 500,   providers = NULL,   remove_duplicates = FALSE,   date = NULL,   limit = 500,   expand_factor = 0.1 )"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_pa.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample Presence-Absence Data for a Species in Hexagonal Grid — h3sdm_pa","text":"species Character. Species name. aoi_sf sf polygon area interest (AOI). res Integer. H3 resolution (1–16). Default 6. n_neg Integer. Number pseudo-absence hexagons sample. Default 500. providers Character vector data sources (e.g., \"gbif\"). remove_duplicates Logical. Remove duplicate geometries. Default FALSE. date Character vector c(\"start\",\"end\") filter date. limit Integer. Maximum number occurrence records download. Default 500. expand_factor Numeric. Expand AOI bbox full hex coverage. Default 0.1.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_pa.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample Presence-Absence Data for a Species in Hexagonal Grid — h3sdm_pa","text":"sf object columns h3_address, presence (factor 0/1), geometry.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_pa.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sample Presence-Absence Data for a Species in Hexagonal Grid — h3sdm_pa","text":"","code":"if (FALSE) { # \\dontrun{ # Example requires internet connection and AOI polygon nc <- sf::st_read(system.file(\"shape/nc.shp\", package=\"sf\")) rec_sf <- h3sdm_pa(\"Lynx rufus\", nc, res = 6, n_neg = 300, limit = 1000) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict species presence probability using H3 hexagons — h3sdm_predict","title":"Predict species presence probability using H3 hexagons — h3sdm_predict","text":"Uses fitted tidymodels workflow (h3sdm_fit_model standalone workflow) predict species presence probabilities new spatial H3 grid. Automatically generates centroid coordinates (x y) missing. new_data must contain predictor variables used model training.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict species presence probability using H3 hexagons — h3sdm_predict","text":"","code":"h3sdm_predict(fit_object, new_data)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict species presence probability using H3 hexagons — h3sdm_predict","text":"fit_object fitted tidymodels workflow output list h3sdm_fit_model. new_data sf object containing spatial grid predictor variables used model training.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict species presence probability using H3 hexagons — h3sdm_predict","text":"sf object original geometry new column prediction containing predicted probability presence hexagon.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predict.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict species presence probability using H3 hexagons — h3sdm_predict","text":"","code":"if (FALSE) { # \\dontrun{ # Predict presence probabilities on a new hex grid predictions_sf <- h3sdm_predict(   fit_object = fitted_model,   new_data   = grid_sf ) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predictors.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Predictors for Hexagonal Grids — h3sdm_predictors","title":"Extract Predictors for Hexagonal Grids — h3sdm_predictors","text":"Generates H3 hexagonal grid specified area interest (AOI) extracts numeric, categorical, landscape predictors hexagon. Uses functions 'paisaje' package calculate landscape metrics landscape_raster provided. landscape_raster supplied, numeric categorical predictors extracted.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predictors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Predictors for Hexagonal Grids — h3sdm_predictors","text":"","code":"h3sdm_predictors(   aoi_sf,   res = 6,   num_rasters = NULL,   cat_rasters = NULL,   landscape_raster = NULL,   expand_factor = 0.1 )"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predictors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Predictors for Hexagonal Grids — h3sdm_predictors","text":"aoi_sf sf object (POLYGON MULTIPOLYGON) defining area interest. res Integer. H3 resolution (default = 6). num_rasters SpatRaster list SpatRasters numeric variables extract (optional). cat_rasters named list SpatRasters categorical variables extract (optional). landscape_raster SpatRaster calculating landscape metrics (optional). expand_factor Numeric. Factor expand AOI creating H3 grid (default = 0.1).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predictors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Predictors for Hexagonal Grids — h3sdm_predictors","text":"sf object (MULTIPOLYGON) representing H3 grid, predictor columns added.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_predictors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Predictors for Hexagonal Grids — h3sdm_predictors","text":"","code":"if (FALSE) { # \\dontrun{ # Example: Extract numeric and categorical predictors for a study area library(terra) library(sf)  bio <- rast(\"cr_bio/bio.tif\")           # numeric raster lc  <- rast(\"landcover.tif\")            # categorical raster cr  <- cr_outline_c                      # area of interest (sf POLYGON/MULTIPOLYGON)  pred_sf <- h3sdm_predictors(   aoi_sf = cr,   res = 6,   num_rasters = bio,   cat_rasters = list(landcover = lc) ) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","title":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","text":"Prepares sf object H3 hexagonal data modeling tidymodels ecosystem. Extracts centroid coordinates, assigns appropriate roles variables automatically, returns ready--use recipe modeling species distributions.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","text":"","code":"h3sdm_recipe(data)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","text":"data sf object, typically output h3sdm_data(), including species presence-absence, H3 addresses, environmental predictors. geometry must type MULTIPOLYGON.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","text":"tidymodels recipe object (class \"h3sdm_recipe\") ready modeling.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","text":"function prepares spatial H3 grid data species distribution modeling: Extracts centroid coordinates (x y) MULTIPOLYGON geometries using sf functions. Removes geometry column create purely tabular dataset tidymodels. Assigns roles columns: presence → \"outcome\" (target variable) h3_address → \"id\" (used joining predictions later) x y → \"spatial_predictor\" columns assigned \"predictor\" role.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a tidymodels recipe for H3-based SDMs — h3sdm_recipe","text":"","code":"if (FALSE) { # \\dontrun{ # Example: Prepare H3 hexagonal SDM data for modeling # `combined_data` is typically the output of h3sdm_data() sdm_recipe <- h3sdm_recipe(combined_data) sdm_recipe  # inspect the recipe object } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","title":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","text":"function prepares sf (Simple Features) object use Species Distribution Model (SDM) workflow 'mgcv' GAM engine within 'tidymodels' ecosystem. crucial step extracting coordinates (x, y) geometry assigning predictor role can used GAM's spatial smooth term (s(x, y, bs = \"tp\")). also assigns special roles 'presence' 'h3_address' variables.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","text":"","code":"h3sdm_recipe_gam(data)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","text":"data sf (Simple Features) object containing species presence/absence/abundance data, environmental variables (e.g., bioclimatic), geometry (e.g., H3 centroids points).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","text":"recipe object class h3sdm_recipe_gam, ready chained additional preprocessing steps (e.g., normalization).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","text":"Assigned Roles: outcome: \"presence\" (column containing response variable). id: \"h3_address\" (cell identifier, used modeling). predictor: variables, including x y GAM's smoothing function. Note x y: x y coordinates added recipe's internal data frame defined predictor meet requirements mgcv engine.","code":""},{"path":[]},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_recipe_gam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates a 'recipe' object for Generalized Additive Models (GAM) in SDM. — h3sdm_recipe_gam","text":"","code":"if (FALSE) { # \\dontrun{ # Assuming 'data_sf' is your sf object with 'presence' and 'h3_address' # gam_rec <- h3sdm_recipe_gam(data_sf) # Add normalization only to bio variables, excluding x and y # final_rec <- gam_rec %>% step_normalize(starts_with(\"bio\")) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_spatial_cv.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","title":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","text":"Generates spatially aware cross-validation split species distribution modeling using H3 hexagonal grids. helps avoid inflated model performance estimates caused spatial autocorrelation, producing robust model evaluation.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_spatial_cv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","text":"","code":"h3sdm_spatial_cv(data, method = \"block\", v = 5, ...)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_spatial_cv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","text":"data sf object, typically output h3sdm_data(). method Character. spatial resampling method use: \"block\" Use spatialsample::spatial_block_cv() block-based spatial CV. \"cluster\" Use spatialsample::spatial_clustering_cv() cluster-based spatial CV. v Integer. Number folds (default = 5). ... Additional arguments passed underlying spatialsample function.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_spatial_cv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","text":"rsplit object (rsample) representing spatial CV folds.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_spatial_cv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","text":"Spatial cross-validation avoids overly optimistic performance estimates ensuring training testing data spatially separated. \"block\": Divides spatial domain contiguous blocks. \"cluster\": Groups locations spatial clusters splitting.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_spatial_cv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a spatial-aware cross-validation split for H3 data — h3sdm_spatial_cv","text":"","code":"if (FALSE) { # \\dontrun{ # Example: Create spatial cross-validation splits for H3 data  # Block spatial CV with default folds spatial_cv_block <- h3sdm_spatial_cv(combined_data, method = \"block\")  # Cluster spatial CV with 10 folds spatial_cv_cluster <- h3sdm_spatial_cv(combined_data, method = \"cluster\", v = 10) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_stack_fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates and fully fits an ensemble model (Stack). — h3sdm_stack_fit","title":"Creates and fully fits an ensemble model (Stack). — h3sdm_stack_fit","text":"function combines process creating model stack, optimizing weights (blend_predictions), fitting base models complete training set (fit_members()) single step. Warning: follow canonical tidymodels flow convenient. requires fitting results generated using h3sdm_fit_model(..., for_stacking = TRUE).","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_stack_fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates and fully fits an ensemble model (Stack). — h3sdm_stack_fit","text":"","code":"h3sdm_stack_fit(..., non_negative = TRUE, metric = NULL)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_stack_fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates and fully fits an ensemble model (Stack). — h3sdm_stack_fit","text":"... List objects result h3sdm_fit_model(). object must contain cv_model element (result fit_resamples). non_negative Logical. TRUE (default), forces candidate model weights non-negative. metric metric used optimize combination weights.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_stack_fit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates and fully fits an ensemble model (Stack). — h3sdm_stack_fit","text":"list containing two elements: blended_model (stack blending) final_model (fully fitted model_stack object). final_model ready direct prediction predict().","code":""},{"path":[]},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_utils.html","id":null,"dir":"Reference","previous_headings":"","what":"Utilities for CRAN checks — h3sdm_utils","title":"Utilities for CRAN checks — h3sdm_utils","text":"Imports global variable declarations avoid check NOTES.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","title":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","text":"Combines model specification prepared recipe single tidymodels workflow. workflow suitable species distribution modeling using H3 hexagonal grids can directly fitted cross-validated.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","text":"","code":"h3sdm_workflow(model_spec, recipe)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","text":"model_spec tidymodels model specification (e.g., logistic_reg(), rand_forest(), boost_tree()), describing model type engine use fitting. recipe tidymodels recipe object, typically created h3sdm_recipe(), preprocesses data defines predictor/response roles.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","text":"workflow object ready used model fitting fit() cross-validation.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","text":"function creates workflow combines preprocessing modeling steps. encapsulation allows consistent model training evaluation tidymodels functions like fit() fit_resamples(), particularly useful applying multiple models parallel.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a tidymodels workflow for H3-based SDMs — h3sdm_workflow","text":"","code":"if (FALSE) { # \\dontrun{ library(parsnip) # Example: Create a tidymodels workflow for H3-based species distribution modeling  # Step 1: Define model specification my_model_spec <- logistic_reg() %>%   set_mode(\"classification\") %>%   set_engine(\"glm\")  # Step 2: Create recipe my_recipe <- h3sdm_recipe(combined_data)  # Step 3: Combine into workflow sdm_wf <- h3sdm_workflow(model_spec = my_model_spec, sdm_recipe = my_recipe) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","title":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","text":"function constructs workflow object combining GAM model specification (gen_additive_mod mgcv engine) either recipe object explicit model formula. optimized Species Distribution Models (SDM) use smooth splines, ensuring specialized GAM formula (containing s() terms) correctly passed model, even recipe provided general data preprocessing.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","text":"","code":"h3sdm_workflow_gam(gam_spec, recipe = NULL, formula = NULL)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","text":"gam_spec parsnip model specification type gen_additive_mod(), configured set_engine(\"mgcv\"). recipe (Optional) recipes package recipe object (e.g., output h3sdm_recipe_gam). Used general data preprocessing like normalization dummy variable creation. formula (Optional) formula object defines structure GAM, including smooth terms (e.g., y ~ s(x1) + s(x, y)). provided alongside recipe, formula overrides recipe's implicit formula final model fit.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","text":"workflow object, ready fitting fit() resampling fit_resamples() tune_grid().","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","text":"Formula Priority: recipe provided, workflow uses recipe's implicit formula (e.g., outcome ~ .). recipe formula provided, workflow uses recipe data preprocessing explicitly passes formula mgcv engine fitting, enabling use specialized terms like s(x, y).","code":""},{"path":[]},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflow_gam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Creates a tidymodels workflow for Generalized Additive Models (GAM). — h3sdm_workflow_gam","text":"","code":"if (FALSE) { # \\dontrun{ library(parsnip) # 1. Define the model specification gam_spec <- gen_additive_mod() %>%   set_engine(\"mgcv\") %>%   set_mode(\"classification\")  # 2. Define a specialized GAM formula gam_formula <- presence ~ s(bio1) + s(x, y, bs = \"tp\")  # 3. Define a base recipe (assuming 'data' exists) # base_rec <- h3sdm_recipe_gam(data)  # 4. Create the combined workflow # h3sdm_wf <- h3sdm_workflow_gam( #   gam_spec = gam_spec, #   recipe = base_rec, #   formula = gam_formula # ) } # }"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflows.html","id":null,"dir":"Reference","previous_headings":"","what":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","title":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","text":"Creates list tidymodels workflows multiple model specifications prepared recipe. useful comparing different modeling approaches species distribution modeling using H3 hexagonal grids. returned workflows can used model fitting resampling.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflows.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","text":"","code":"h3sdm_workflows(model_specs, recipe)"},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflows.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","text":"model_specs named list tidymodels model specifications (e.g., logistic_reg(), rand_forest(), boost_tree()), element specifies different modeling approach included workflow set. recipe tidymodels recipe object, typically created h3sdm_recipe(), prepares preprocesses data modeling.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflows.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","text":"named list workflow objects, one per model specification.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflows.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","text":"function automates creation workflows multiple model specifications. workflow combines preprocessing steps (recipe) different modeling method. facilitates systematic comparison models especially useful ensemble stacking approaches.","code":""},{"path":"https://manuelspinola.github.io/h3sdm/reference/h3sdm_workflows.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create multiple tidymodels workflows for H3-based SDMs — h3sdm_workflows","text":"","code":"if (FALSE) { # \\dontrun{ # ... (examples are correct as is) ... } # }"},{"path":"https://manuelspinola.github.io/h3sdm/news/index.html","id":"h3sdm-010","dir":"Changelog","previous_headings":"","what":"h3sdm 0.1.0","title":"h3sdm 0.1.0","text":"Initial CRAN submission.","code":""}]
